{% extends "pdata_app/base.html" %}
{% load staticfiles %}
{% load render_table from django_tables2 %}

    {% block contents %}
        <p>
            {% if request.GET.data_submission %}
                These are the netCDF files for data submission ...
                <pre>{{ request.GET.data_submission_string }}</pre>
            {% elif request.GET.data_issue %}
                These are the netCDF files affected by data issue
                <a href="{% url 'data_issues' %}?id={{ request.GET.data_issue }}">
                    #{{ request.GET.data_issue }}</a>  ...
                <pre>{{ request.GET.data_issue_string }}</pre>
            {% else %}
                These are the netCDF files that we know about...
            {% endif %}
        </p>

        <p>
            <form class="form-inline" action="{% url 'data_files' %}" method="get">
                <div class="form-group">
                    <label class="sr-only" for="name">Name</label>
                    <input type="text" class="form-control" name="name" id="name" placeholder="Name" {% if request.GET.name %} value="{{ request.GET.name }}" {% endif %} autofocus>
                </div>
                <div class="form-group">
                    <label class="sr-only" for="directory">Directory</label>
                    <input type="text" class="form-control" name="directory" id="directory" placeholder="Directory" {% if request.GET.directory %} value="{{ request.GET.directory }}" {% endif %}>
                </div>
                <div class="form-group">
                    <label class="sr-only" for="version">Version</label>
                    <input type="text" class="form-control" name="version" id="version" placeholder="Version" {% if request.GET.version %} value="{{ request.GET.version }}" {% endif %}>
                </div>
                <div class="form-group">
                    <label class="sr-only" for="grid">Grid Label</label>
                    <input type="text" class="form-control" name="grid" id="grid" placeholder="Grid Label" {% if request.GET.grid %} value="{{ request.GET.grid }}" {% endif %}>
                </div>
                <div class="form-group">
                    <label class="sr-only" for="tape_url">Tape URL</label>
                    <input type="text" class="form-control" name="tape_url" id="tape_url" placeholder="Tape URL" {% if request.GET.tape_url %} value="{{ request.GET.tape_url }}" {% endif %}>
                </div>
                {% if request.GET.data_submission %}
                    <input type="hidden" name="data_submission" value="{{ request.GET.data_submission }}">
                    <input type="hidden" name="data_submission_string" value="{{ request.GET.data_submission_string }}">
                {% elif request.GET.data_issue %}
                    <input type="hidden" name="data_issue" value="{{ request.GET.data_issue }}">
                    <input type="hidden" name="data_issue_string" value="{{ request.GET.data_issue_string }}">
                {% endif %}
                <a class="btn btn-default" href="{% url 'data_files' %}">Clear</a>
                <input type="submit" class="btn btn-default" value="Filter" />
            </form>
        </p>

        {% render_table table %}
    {% endblock %}